{% extends 'layout.html' %} 
{% block title %}Book Detail{% endblock %} 

{% block head %}
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/assets/css/style.css">
  <link rel="stylesheet" href="/static/assets/css/navbar.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/static/assets/css/product.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.1.16/backbone.localStorage-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/iScroll/5.1.3/iscroll.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.22/webfontloader.js"></script>
  <!-- Link Swiper's CSS -->
  <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />

  <link rel="stylesheet" href="/static/assets/css/css/style.css">
  <link rel="stylesheet" href="/static/assets/css/css/style.scss">
  {% endblock %}
  {% block content %}

  <section class="header_book">
    <div class="container">
      <div class="card-wrapper">
        <div class="card-p">
          <!-- card left -->
          <!-- <div class = "product-imgs">
                    <div class = "img-display">
                      <div class = "img-showcase">
                        <img src = "https://fadzrinmadu.github.io/hosted-/static/assets/product-detail-page-design-with-image-slider-html-css-and-javascript/shoe_1.jpg" alt = "shoe image">
                        <img src = "https://fadzrinmadu.github.io/hosted-/static/assets/product-detail-page-design-with-image-slider-html-css-and-javascript/shoe_2.jpg" alt = "shoe image">
                        <img src = "https://fadzrinmadu.github.io/hosted-/static/assets/product-detail-page-design-with-image-slider-html-css-and-javascript/shoe_3.jpg" alt = "shoe image">
                        <img src = "https://fadzrinmadu.github.io/hosted-/static/assets/product-detail-page-design-with-image-slider-html-css-and-javascript/shoe_4.jpg" alt = "shoe image">
                      </div>
                    </div>
                    <div class = "img-select">
                      <div class = "img-item">
                        <a href = "#" data-id = "1">
                          <img src = "https://fadzrinmadu.github.io/hosted-/static/assets/product-detail-page-design-with-image-slider-html-css-and-javascript/shoe_1.jpg" alt = "shoe image">
                        </a>
                      </div>
                      <div class = "img-item">
                        <a href = "#" data-id = "2">
                          <img src = "https://fadzrinmadu.github.io/hosted-/static/assets/product-detail-page-design-with-image-slider-html-css-and-javascript/shoe_2.jpg" alt = "shoe image">
                        </a>
                      </div>
                      <div class = "img-item">
                        <a href = "#" data-id = "3">
                          <img src = "https://fadzrinmadu.github.io/hosted-/static/assets/product-detail-page-design-with-image-slider-html-css-and-javascript/shoe_3.jpg" alt = "shoe image">
                        </a>
                      </div>
                      <div class = "img-item">
                        <a href = "#" data-id = "4">
                          <img src = "https://fadzrinmadu.github.io/hosted-/static/assets/product-detail-page-design-with-image-slider-html-css-and-javascript/shoe_4.jpg" alt = "shoe image">
                        </a>
                      </div>
                    </div>
                  </div> -->
          <!-- card right -->
          <div class="img_p">
            <img src="/static/assets/book-images/{{book[7]}}" alt="">
          </div>
          <div class="product-content">
            <!-- <a href="#" class="product-link">visit nike store</a> -->
            <p class="new-price">Author: <span>{{book[2]}}</span></p>

            <div class="product-rating">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
              <span>{{book[9]}}(21)</span>
            </div>

            <div class="product-price">
              <!-- <p class="last-price">Old Price: <span>Rs-257.00</span></p> -->
              <p class="new-price">Price: <span>Rs-{{book[5]}}</span></p>
            </div>

            <div class="product-detail">
              <p>{{book[8][:1000]}}</p>
              <!-- <ul>
                        <li>Color: <span>Black</span></li>
                        <li>Available: <span>in stock</span></li>
                        <li>Category: <span>Shoes</span></li>
                        <li>Shipping Area: <span>All over the world</span></li>
                        <li>Shipping Fee: <span>Free</span></li>
                      </ul> -->
            </div>

            <div class="purchase-info">

              <!-- <input type="number" min="0" value="1"> -->
              <!-- <a href="details.html" type="button" class="btn">
                Add to Cart <i class="fas fa-shopping-cart"></i>
              </a> -->
              
              {% if loggedin %}
              <!-- <span onclick="addtocart(i={{book[0]}})"><i class="fa fa-bag-shopping"></i></span> -->
              <p class="flex flex-wrap flex-gap-xxs">
                  <!-- <a class="cd-article-link" href="https://codyhouse.co/gem/add-to-cart-interaction">üìù View Tutorial</a> -->
                  <a href="#0" class="btn js-cd-add-to-cart" data-id="{{book[0]}}" data-price="{{book[5]}}" data-title="{{book[1]}}" data-img="{{book[7]}}"><i class="fa fa-bag-shopping"></i>Add to cart</a>
              </p>
              <!-- <span class="add-to-cart"><i class="fa fa-bag-shopping"></i></span>
              <span class="add-to-wish"><i class="fa fa-heart"></i></span> -->
              {% else %}
              <p class="flex flex-wrap flex-gap-xxs">
                  <!-- <a class="cd-article-link" href="https://codyhouse.co/gem/add-to-cart-interaction">üìù View Tutorial</a> -->
                  <a class="btn" onclick="loginE()"></i>Add to cart</a>
              </p>
              {% endif %}

            </div>


          </div>
        </div>
      </div>
    </div>
  </section>
  <div class="cd-cart cd-cart--empty js-cd-cart">
      <a href="#0" class="cd-cart__trigger text-replace">
          Cart
          <ul class="cd-cart__count"> <!-- cart items count -->
              <li>0</li>
              <li>0</li>
          </ul> <!-- .cd-cart__count -->
      </a>
  
      <div class="cd-cart__content">
          <div class="cd-cart__layout">
              <header class="cd-cart__header">
                  <h2>Cart</h2>
                  <span class="cd-cart__undo">Item removed. <a href="#0">Undo</a></span>
              </header>
              
              <div class="cd-cart__body">
                  <ul>
                      <!-- products added to the cart will be inserted here using JavaScript -->
                  </ul>
              </div>
              <div id="chckout"></div>
  
              <footer class="cd-cart__footer">
                  <a href="#0" class="cd-cart__checkout">
            <em onclick="checkoutt()">Checkout - $<span>0</span>
              <svg class="icon icon--sm" viewBox="0 0 24 24"><g fill="none" stroke="currentColor"><line stroke-width="2" stroke-linecap="round" stroke-linejoin="round" x1="3" y1="12" x2="21" y2="12"/><polyline stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="15,6 21,12 15,18 "/></g>
              </svg>
            </em>
          </a>
          <p style="background-color:black; color: white; text-align: center;">Method <bold style="background-color:black; color: white; text-align: center;">Home Delivery</bold></p>
              </footer>
          </div>
          <span id="groot" hidden></span>
      </div> <!-- .cd-cart__content -->
  </div>
  {% endblock %}
  {% block scripts %}

  <script src="/static/assets/js/cart.js"></script>


  <script>
    /* Code by CodingTuting.Com */
    function footerToggle(footerBtn) {
      Rs-(footerBtn).toggleClass("btnActive");
      Rs-(footerBtn).next().toggleClass("active");
    }
  </script>

    <script src="/static//assets/js/js/main.js"></script>
    <script src="/static//assets/js/js/util.js"></script>

    <script>
      function loginE(){
          alert("Login First!");
      }
  </script>
    <script type="text/javascript">
        function checkoutt(){
  		    cartTotal = document.getElementsByClassName('cd-cart__checkout')[0].getElementsByTagName('span')[0],
            console.log(cartTotal.innerText)
            productids = document.getElementById("groot").innerHTML
            console.log("productids")
            console.log(productids)
            $.ajax({
                // data : cartList[0],
                data : {
                    'cart_total' : cartTotal.innerText,
                    'product_ids' : productids,
                },
                type : 'POST',
                url : '/checkout'
                })
                .done(function(data){
                // $('#output').text(data.output).show();
                window.location.href = '/order-placed';
                });
                // e.preventDefault();
            }
    </script>
  {% endblock %}