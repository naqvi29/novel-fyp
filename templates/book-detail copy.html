{% extends 'layout.html' %} 
{% block title %}Book Detail{% endblock %} 

{% block head %}
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/assets/css/style.css">
  <link rel="stylesheet" href="/static/assets/css/navbar.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/static/assets/css/product.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.1.16/backbone.localStorage-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/iScroll/5.1.3/iscroll.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.22/webfontloader.js"></script>
  <!-- Link Swiper's CSS -->
  <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />

  <link rel="stylesheet" href="/static/assets/css/css/style.css">
  <link rel="stylesheet" href="/static/assets/css/css/style.scss">
  <link rel="stylesheet" href="/static/assets/css/3_pages.css">
  {% endblock %}
  {% block content %}

  <section class="header_book">
    <div class="container">
      <div class="card-wrapper">
        <div class="card-p">
          <div class="img_p">
            <img src="/static/assets/book-images/{{book[7]}}" style="margin-right: 100%; height: 430px;" alt="">
          </div>
          <div class="product-content">
            <p class="new-price">Title: <span>{{book[1]}}</span></p>
            <p class="new-price">Author: <span>{{book[2]}}</span></p>
            {% if book[11] %}
              <p class="new-price">Publisher: <span>{{book[11]}}</span></p>
            {% endif %}
            {% if book[12] %}
            <p class="new-price">ISBN#: <span>{{book[12]}}</span></p>
            {% endif %}

            <div class="product-rating">
              {% if book[9] == 1 %}
              <i class="fas fa-star"></i>
              <span>{{book[9]}}</span>
              {% elif book[9] == 2 %}
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <span>{{book[9]}}</span>
              {% elif book[9] == 3 %}
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <span>{{book[9]}}</span>
              {% elif book[9] == 4 %}
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <span>{{book[9]}}</span>
              {% elif book[9] == 5 %}
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <span>{{book[9]}}</span>
              {% else %}
              <i style="color:grey" class="fas fa-star"></i>
              <i style="color:grey" class="fas fa-star"></i>
              <i style="color:grey" class="fas fa-star"></i>
              <i style="color:grey" class="fas fa-star"></i>
              <i style="color:grey" class="fas fa-star"></i>
              <span>N/A</span>
              {% endif %}
            </div>

            <div class="product-price">
              <p class="new-price">Price: <span>Rs-{{book[5]}}</span></p>
            </div>

            <div class="product-detail">
              <p>{{book[8][:1000]}}</p>
            </div>

            <div class="purchase-info">
              
              <!-- {% if loggedin %}
              <p class="flex flex-wrap flex-gap-xxs">
                  <a href="#0" class="btn js-cd-add-to-cart" data-id="{{book[0]}}" data-price="{{book[5]}}" data-title="{{book[1]}}" data-img="{{book[7]}}"><i class="fa fa-bag-shopping"></i>Add to cart</a>
              </p>
              {% else %}
              <p class="flex flex-wrap flex-gap-xxs">
                  <a class="btn" onclick="loginE()"></i>Add to cart</a>
              </p>
              {% endif %} -->
              <p class="flex flex-wrap flex-gap-xxs">
                  <a href="#0" class="btn js-cd-add-to-cart" data-id="{{book[0]}}" data-price="{{book[5]}}" data-title="{{book[1]}}" data-img="{{book[7]}}"><i class="fa fa-bag-shopping"></i>Add to cart</a>
              </p>

            </div>


          </div>
        </div>
      </div>
    </div>
  </section>
  <div class="cd-cart cd-cart--empty js-cd-cart">
      <a href="#0" class="cd-cart__trigger text-replace">
          Cart
          <ul class="cd-cart__count"> <!-- cart items count -->
              <li>0</li>
              <li>0</li>
          </ul> <!-- .cd-cart__count -->
      </a>
  
      <div class="cd-cart__content">
          <div class="cd-cart__layout">
              <header class="cd-cart__header">
                  <h2>Cart</h2>
                  <span class="cd-cart__undo">Item removed. <a href="#0">Undo</a></span>
              </header>
              
              <div class="cd-cart__body">
                  <ul>
                      <!-- products added to the cart will be inserted here using JavaScript -->
                  </ul>
              </div>
              <div id="chckout"></div>
  
              <footer class="cd-cart__footer">
                <!-- <div style="    text-align: center;
                background-color: black;
                color: white;">Self Pickup<input style="margin-left: 1rem;" type="checkbox" placeholder="self pickup"></div> -->
                  <a href="#0" class="cd-cart__checkout">
            <em onclick="checkoutt()">Checkout - Rs<span>0</span>
              <svg class="icon icon--sm" viewBox="0 0 24 24"><g fill="none" stroke="currentColor"><line stroke-width="2" stroke-linecap="round" stroke-linejoin="round" x1="3" y1="12" x2="21" y2="12"/><polyline stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="15,6 21,12 15,18 "/></g>
              </svg>
            </em>
          </a>
              </footer>
          </div>
          <span id="groot" hidden></span>
      </div> <!-- .cd-cart__content -->
  </div>
  {% endblock %}
  {% block scripts %}

  <!-- <script src="/static/assets/js/cart.js"></script> -->


  <script>
    /* Code by CodingTuting.Com */
    function footerToggle(footerBtn) {
      Rs-(footerBtn).toggleClass("btnActive");
      Rs-(footerBtn).next().toggleClass("active");
    }
  </script>
    <script>
      function loginE(){
          alert("Login First!");
      }
  </script>
    <script type="text/javascript">
        function checkoutt(){
  		    cartTotal = document.getElementsByClassName('cd-cart__checkout')[0].getElementsByTagName('span')[0],
            console.log(cartTotal.innerText)
            productids = document.getElementById("groot").innerHTML
            console.log("productids")
            console.log(productids)
            
            window.location.href = '/cart/'+productids;

            // $.ajax({
            //     data : {
            //         'cart_total' : cartTotal.innerText,
            //         'product_ids' : productids,
            //     },
            //     type : 'POST',
            //     url : '/checkout'
            //     })
            //     .done(function(data){
            //       console.log(data)
            //     window.location.href = '/order-placed';
            //     });
            }
    </script>
  
    <script src="/static//assets/js/js/main.js"></script>
    <script src="/static//assets/js/js/util.js"></script>
    {% endblock %}
